<!-- Main Application Layout -->\n<div class=\"app-container\" [class.authenticated]=\"isAuthenticated\">\n  \n  <!-- Global Loading Indicator -->\n  <div class=\"loading-overlay\" *ngIf=\"isLoading\">\n    <fluent-progress-ring></fluent-progress-ring>\n    <span class=\"loading-text\">Loading...</span>\n  </div>\n\n  <!-- Authentication Layout -->\n  <div class=\"auth-layout\" *ngIf=\"!isAuthenticated\">\n    <router-outlet></router-outlet>\n  </div>\n\n  <!-- Main Application Layout -->\n  <div class=\"main-layout\" *ngIf=\"isAuthenticated\">\n    \n    <!-- Header -->\n    <header class=\"app-header\">\n      <div class=\"header-content\">\n        \n        <!-- Logo and Title -->\n        <div class=\"header-brand\">\n          <fluent-button \n            appearance=\"stealth\" \n            class=\"menu-toggle\"\n            (click)=\"toggleSidebar()\"\n            aria-label=\"Toggle navigation menu\">\n            <fluent-icon name=\"Navigation\" size=\"20\"></fluent-icon>\n          </fluent-button>\n          \n          <div class=\"brand-content\">\n            <img src=\"assets/images/logo.svg\" alt=\"AI-BI Genie\" class=\"logo\" />\n            <h1 class=\"app-title\">AI-BI Genie</h1>\n          </div>\n        </div>\n\n        <!-- Header Actions -->\n        <div class=\"header-actions\">\n          \n          <!-- Search -->\n          <div class=\"search-container\">\n            <fluent-search \n              placeholder=\"Search dashboards, reports...\"\n              class=\"global-search\">\n            </fluent-search>\n          </div>\n\n          <!-- Notifications -->\n          <fluent-button \n            appearance=\"stealth\" \n            class=\"notification-button\"\n            aria-label=\"Notifications\">\n            <fluent-icon name=\"Alert\" size=\"20\"></fluent-icon>\n            <span class=\"notification-badge\" *ngIf=\"notificationCount > 0\">{{notificationCount}}</span>\n          </fluent-button>\n\n          <!-- Theme Toggle -->\n          <fluent-button \n            appearance=\"stealth\" \n            (click)=\"onToggleTheme()\"\n            [attr.aria-label]=\"'Switch to ' + (currentTheme === 'light' ? 'dark' : 'light') + ' theme'\">\n            <fluent-icon \n              [name]=\"currentTheme === 'light' ? 'WeatherMoon' : 'WeatherSunny'\" \n              size=\"20\">\n            </fluent-icon>\n          </fluent-button>\n\n          <!-- User Menu -->\n          <fluent-menu>\n            <fluent-button \n              slot=\"trigger\" \n              appearance=\"stealth\" \n              class=\"user-menu-trigger\"\n              aria-label=\"User menu\">\n              <fluent-avatar \n                name=\"{{currentUser?.name}}\"\n                [src]=\"currentUser?.avatar\"\n                size=\"small\">\n              </fluent-avatar>\n              <span class=\"user-name\">{{currentUser?.name}}</span>\n              <fluent-icon name=\"ChevronDown\" size=\"12\"></fluent-icon>\n            </fluent-button>\n            \n            <fluent-menu-item (click)=\"navigateToProfile()\">Profile Settings</fluent-menu-item>\n            <fluent-menu-item (click)=\"navigateToPreferences()\">Preferences</fluent-menu-item>\n            <fluent-divider></fluent-divider>\n            <fluent-menu-item (click)=\"showHelp()\">Help & Support</fluent-menu-item>\n            <fluent-menu-item (click)=\"onLogout()\">Sign Out</fluent-menu-item>\n          </fluent-menu>\n        </div>\n      </div>\n    </header>\n\n    <!-- Main Content Area -->\n    <div class=\"app-body\">\n      \n      <!-- Navigation Sidebar -->\n      <nav class=\"app-sidebar\" [class.collapsed]=\"sidebarCollapsed\">\n        <div class=\"sidebar-content\">\n          \n          <!-- Primary Navigation -->\n          <div class=\"nav-section\">\n            <h3 class=\"nav-section-title\">Dashboard</h3>\n            <fluent-nav-list>\n              <fluent-nav-item \n                routerLink=\"/dashboard\" \n                routerLinkActive=\"active\"\n                [routerLinkActiveOptions]=\"{exact: true}\">\n                <fluent-icon name=\"Dashboard\" size=\"20\" slot=\"start\"></fluent-icon>\n                Overview\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/analytics\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"Analytics\" size=\"20\" slot=\"start\"></fluent-icon>\n                Analytics\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/reports\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"DocumentReport\" size=\"20\" slot=\"start\"></fluent-icon>\n                Reports\n              </fluent-nav-item>\n            </fluent-nav-list>\n          </div>\n\n          <!-- AI Features -->\n          <div class=\"nav-section\">\n            <h3 class=\"nav-section-title\">AI Assistant</h3>\n            <fluent-nav-list>\n              <fluent-nav-item \n                routerLink=\"/ai-insights\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"BrainCircuit\" size=\"20\" slot=\"start\"></fluent-icon>\n                AI Insights\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/recommendations\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"LightBulb\" size=\"20\" slot=\"start\"></fluent-icon>\n                Recommendations\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/forecasting\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"PredictiveForecast\" size=\"20\" slot=\"start\"></fluent-icon>\n                Forecasting\n              </fluent-nav-item>\n            </fluent-nav-list>\n          </div>\n\n          <!-- Data Management -->\n          <div class=\"nav-section\">\n            <h3 class=\"nav-section-title\">Data</h3>\n            <fluent-nav-list>\n              <fluent-nav-item \n                routerLink=\"/data-sources\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"Database\" size=\"20\" slot=\"start\"></fluent-icon>\n                Data Sources\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/data-quality\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"Shield\" size=\"20\" slot=\"start\"></fluent-icon>\n                Data Quality\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/pipelines\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"Pipeline\" size=\"20\" slot=\"start\"></fluent-icon>\n                Pipelines\n              </fluent-nav-item>\n            </fluent-nav-list>\n          </div>\n\n          <!-- Administration -->\n          <div class=\"nav-section\" *ngIf=\"isAdmin\">\n            <h3 class=\"nav-section-title\">Administration</h3>\n            <fluent-nav-list>\n              <fluent-nav-item \n                routerLink=\"/admin/users\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"People\" size=\"20\" slot=\"start\"></fluent-icon>\n                User Management\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/admin/settings\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"Settings\" size=\"20\" slot=\"start\"></fluent-icon>\n                System Settings\n              </fluent-nav-item>\n              \n              <fluent-nav-item \n                routerLink=\"/admin/monitoring\" \n                routerLinkActive=\"active\">\n                <fluent-icon name=\"Monitor\" size=\"20\" slot=\"start\"></fluent-icon>\n                Monitoring\n              </fluent-nav-item>\n            </fluent-nav-list>\n          </div>\n        </div>\n\n        <!-- Sidebar Footer -->\n        <div class=\"sidebar-footer\">\n          <fluent-button \n            appearance=\"stealth\" \n            (click)=\"toggleSidebar()\"\n            class=\"sidebar-toggle\"\n            [attr.aria-label]=\"sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'\">\n            <fluent-icon \n              [name]=\"sidebarCollapsed ? 'ChevronRight' : 'ChevronLeft'\" \n              size=\"16\">\n            </fluent-icon>\n          </fluent-button>\n        </div>\n      </nav>\n\n      <!-- Main Content -->\n      <main class=\"app-main\" role=\"main\">\n        <div class=\"main-content\">\n          \n          <!-- Breadcrumb Navigation -->\n          <nav class=\"breadcrumb-nav\" aria-label=\"Breadcrumb\">\n            <fluent-breadcrumb>\n              <fluent-breadcrumb-item \n                *ngFor=\"let crumb of breadcrumbs; let isLast = last\"\n                [routerLink]=\"isLast ? null : crumb.route\">\n                {{crumb.label}}\n              </fluent-breadcrumb-item>\n            </fluent-breadcrumb>\n          </nav>\n\n          <!-- Page Content -->\n          <div class=\"page-content\">\n            <router-outlet></router-outlet>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n\n  <!-- Global Notifications -->\n  <div class=\"notifications-container\">\n    <!-- Toast notifications will be displayed here -->\n  </div>\n\n  <!-- Keyboard Shortcuts Help -->\n  <div class=\"keyboard-shortcuts\" *ngIf=\"showKeyboardHelp\">\n    <fluent-card class=\"shortcuts-card\">\n      <h3>Keyboard Shortcuts</h3>\n      <div class=\"shortcuts-list\">\n        <div class=\"shortcut-item\">\n          <kbd>Ctrl</kbd> + <kbd>/</kbd>\n          <span>Open search</span>\n        </div>\n        <div class=\"shortcut-item\">\n          <kbd>Ctrl</kbd> + <kbd>B</kbd>\n          <span>Toggle sidebar</span>\n        </div>\n        <div class=\"shortcut-item\">\n          <kbd>Ctrl</kbd> + <kbd>T</kbd>\n          <span>Toggle theme</span>\n        </div>\n        <div class=\"shortcut-item\">\n          <kbd>Esc</kbd>\n          <span>Close dialogs</span>\n        </div>\n      </div>\n      <fluent-button \n        appearance=\"primary\" \n        (click)=\"hideKeyboardHelp()\">\n        Got it\n      </fluent-button>\n    </fluent-card>\n  </div>\n</div>"